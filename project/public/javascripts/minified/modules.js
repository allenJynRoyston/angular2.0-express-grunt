"format register";System.register("angular2/src/router/router_link_transform",["angular2/compiler","angular2/src/core/change_detection/parser/ast","angular2/src/facade/exceptions","angular2/core","angular2/src/core/change_detection/parser/parser"],!0,function(a,b,c){function d(a,b){var c=new s(a,b.trim()).tokenize();return new t(c).generate()}var e=System.global,f=e.define;e.define=void 0;var g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},h=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},i=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},j=a("angular2/compiler"),k=a("angular2/src/core/change_detection/parser/ast"),l=a("angular2/src/facade/exceptions"),m=a("angular2/core"),n=a("angular2/src/core/change_detection/parser/parser"),o=function(){function a(a){this.value=a}return a}(),p=function(){function a(){}return a}(),q=function(){function a(){}return a}(),r=function(){function a(a){this.ast=a}return a}(),s=function(){function a(a,b){this.parser=a,this.exp=b,this.index=0}return a.prototype.tokenize=function(){for(var a=[];this.index<this.exp.length;)a.push(this._parseToken());return a},a.prototype._parseToken=function(){var a=this.exp[this.index];return"["==a?(this.index++,new p):"]"==a?(this.index++,new q):"("==a?this._parseParams():"/"==a&&0!==this.index?(this.index++,this._parseFixedPart()):this._parseFixedPart()},a.prototype._parseParams=function(){for(var a=this.index;this.index<this.exp.length;++this.index){var b=this.exp[this.index];if(")"==b){var c=this.exp.substring(a+1,this.index);return this.index++,new r(this.parser.parseBinding("{"+c+"}",null).ast)}}throw new l.BaseException("Cannot find ')'")},a.prototype._parseFixedPart=function(){for(var a=this.index,b=!1;this.index<this.exp.length;++this.index){var c=this.exp[this.index];if("("==c||"["==c||"]"==c||"/"==c&&b)break;"."!=c&&"/"!=c&&(b=!0)}var d=this.exp.substring(a,this.index);if(a===this.index||!b||d.startsWith("//"))throw new l.BaseException("Invalid router link");return new o(d)},a}(),t=function(){function a(a){this.tokens=a,this.index=0}return a.prototype.generate=function(){return this._genAuxiliary()},a.prototype._genAuxiliary=function(){for(var a=[];this.index<this.tokens.length;this.index++){var b=this.tokens[this.index];if(b instanceof o)a.push(new k.LiteralPrimitive(b.value));else if(b instanceof r)a.push(b.ast);else{if(b instanceof q)break;b instanceof p&&(this.index++,a.push(this._genAuxiliary()))}}return new k.LiteralArray(a)},a}(),u=function(a){function b(b){a.call(this),this.parser=b}return g(b,a),b.prototype.visitQuote=function(b){return"route"==b.prefix?d(this.parser,b.uninterpretedExpression):a.prototype.visitQuote.call(this,b)},b}(k.AstTransformer);b.parseRouterLinkExpression=d;var v=function(){function a(a){this.astTransformer=new u(a)}return a.prototype.visitNgContent=function(a,b){return a},a.prototype.visitEmbeddedTemplate=function(a,b){return a},a.prototype.visitElement=function(a,b){var c=this,d=a.children.map(function(a){return a.visit(c,b)}),e=a.inputs.map(function(a){return a.visit(c,b)}),f=a.directives.map(function(a){return a.visit(c,b)});return new j.ElementAst(a.name,a.attrs,e,a.outputs,a.exportAsVars,f,d,a.ngContentIndex,a.sourceSpan)},a.prototype.visitVariable=function(a,b){return a},a.prototype.visitEvent=function(a,b){return a},a.prototype.visitElementProperty=function(a,b){return a},a.prototype.visitAttr=function(a,b){return a},a.prototype.visitBoundText=function(a,b){return a},a.prototype.visitText=function(a,b){return a},a.prototype.visitDirective=function(a,b){var c=this,d=a.inputs.map(function(a){return a.visit(c,b)});return new j.DirectiveAst(a.directive,d,a.hostProperties,a.hostEvents,a.exportAsVars,a.sourceSpan)},a.prototype.visitDirectiveProperty=function(a,b){var c=a.value.visit(this.astTransformer);return new j.BoundDirectivePropertyAst(a.directiveName,a.templateName,c,a.sourceSpan)},a=h([m.Injectable(),i("design:paramtypes",[n.Parser])],a)}();return b.RouterLinkTransform=v,e.define=f,c.exports}),System.register("angular2/router/router_link_dsl",["angular2/compiler","angular2/core","angular2/src/router/router_link_transform","angular2/src/facade/lang","angular2/src/router/router_link_transform"],!0,function(a,b,c){var d=System.global,e=d.define;d.define=void 0;var f=a("angular2/compiler"),g=a("angular2/core"),h=a("angular2/src/router/router_link_transform"),i=a("angular2/src/facade/lang"),j=a("angular2/src/router/router_link_transform");return b.RouterLinkTransform=j.RouterLinkTransform,b.ROUTER_LINK_DSL_PROVIDER=i.CONST_EXPR(new g.Provider(f.TEMPLATE_TRANSFORMS,{useClass:h.RouterLinkTransform,multi:!0})),d.define=e,c.exports}),System.register("angular2/src/router/route_config_impl",["angular2/src/facade/lang"],!0,function(a,b,c){var d=System.global,e=d.define;d.define=void 0;var f=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},g=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},h=a("angular2/src/facade/lang"),i=function(){function a(a){this.configs=a}return a=f([h.CONST(),g("design:paramtypes",[Array])],a)}();b.RouteConfig=i;var j=function(){function a(a){var b=a.path,c=a.component,d=a.name,e=a.data,f=a.useAsDefault;this.aux=null,this.loader=null,this.redirectTo=null,this.path=b,this.component=c,this.name=d,this.data=e,this.useAsDefault=f}return a=f([h.CONST(),g("design:paramtypes",[Object])],a)}();b.Route=j;var k=function(){function a(a){var b=a.path,c=a.component,d=a.name;this.data=null,this.aux=null,this.loader=null,this.redirectTo=null,this.useAsDefault=!1,this.path=b,this.component=c,this.name=d}return a=f([h.CONST(),g("design:paramtypes",[Object])],a)}();b.AuxRoute=k;var l=function(){function a(a){var b=a.path,c=a.loader,d=a.name,e=a.data,f=a.useAsDefault;this.aux=null,this.path=b,this.loader=c,this.name=d,this.data=e,this.useAsDefault=f}return a=f([h.CONST(),g("design:paramtypes",[Object])],a)}();b.AsyncRoute=l;var m=function(){function a(a){var b=a.path,c=a.redirectTo;this.name=null,this.loader=null,this.data=null,this.aux=null,this.useAsDefault=!1,this.path=b,this.redirectTo=c}return a=f([h.CONST(),g("design:paramtypes",[Object])],a)}();return b.Redirect=m,d.define=e,c.exports}),System.register("angular2/src/router/instruction",["angular2/src/facade/collection","angular2/src/facade/lang","angular2/src/facade/async"],!0,function(a,b,c){var d=System.global,e=d.define;d.define=void 0;var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("angular2/src/facade/collection"),h=a("angular2/src/facade/lang"),i=a("angular2/src/facade/async"),j=function(){function a(a){this.params=a}return a.prototype.get=function(a){return h.normalizeBlank(g.StringMapWrapper.get(this.params,a))},a}();b.RouteParams=j;var k=function(){function a(a){void 0===a&&(a=h.CONST_EXPR({})),this.data=a}return a.prototype.get=function(a){return h.normalizeBlank(g.StringMapWrapper.get(this.data,a))},a}();b.RouteData=k,b.BLANK_ROUTE_DATA=new k;var l=function(){function a(a,b,c){this.component=a,this.child=b,this.auxInstruction=c}return Object.defineProperty(a.prototype,"urlPath",{get:function(){return h.isPresent(this.component)?this.component.urlPath:""},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"urlParams",{get:function(){return h.isPresent(this.component)?this.component.urlParams:[]},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"specificity",{get:function(){var a="";return h.isPresent(this.component)&&(a+=this.component.specificity),h.isPresent(this.child)&&(a+=this.child.specificity),a},enumerable:!0,configurable:!0}),a.prototype.toRootUrl=function(){return this.toUrlPath()+this.toUrlQuery()},a.prototype._toNonRootUrl=function(){return this._stringifyPathMatrixAuxPrefixed()+(h.isPresent(this.child)?this.child._toNonRootUrl():"")},a.prototype.toUrlQuery=function(){return this.urlParams.length>0?"?"+this.urlParams.join("&"):""},a.prototype.replaceChild=function(a){return new m(this.component,a,this.auxInstruction)},a.prototype.toUrlPath=function(){return this.urlPath+this._stringifyAux()+(h.isPresent(this.child)?this.child._toNonRootUrl():"")},a.prototype.toLinkUrl=function(){return this.urlPath+this._stringifyAux()+(h.isPresent(this.child)?this.child._toLinkUrl():"")},a.prototype._toLinkUrl=function(){return this._stringifyPathMatrixAuxPrefixed()+(h.isPresent(this.child)?this.child._toLinkUrl():"")},a.prototype._stringifyPathMatrixAuxPrefixed=function(){var a=this._stringifyPathMatrixAux();return a.length>0&&(a="/"+a),a},a.prototype._stringifyMatrixParams=function(){return this.urlParams.length>0?";"+this.urlParams.join(";"):""},a.prototype._stringifyPathMatrixAux=function(){return h.isBlank(this.component)?"":this.urlPath+this._stringifyMatrixParams()+this._stringifyAux()},a.prototype._stringifyAux=function(){var a=[];return g.StringMapWrapper.forEach(this.auxInstruction,function(b,c){a.push(b._stringifyPathMatrixAux())}),a.length>0?"("+a.join("//")+")":""},a}();b.Instruction=l;var m=function(a){function b(b,c,d){a.call(this,b,c,d)}return f(b,a),b.prototype.resolveComponent=function(){return i.PromiseWrapper.resolve(this.component)},b}(l);b.ResolvedInstruction=m;var n=function(a){function b(b,c){a.call(this,b,c,{})}return f(b,a),b.prototype.resolveComponent=function(){return i.PromiseWrapper.resolve(this.component)},b.prototype.toLinkUrl=function(){return""},b.prototype._toLinkUrl=function(){return""},b}(l);b.DefaultInstruction=n;var o=function(a){function b(b,c,d){void 0===c&&(c=""),void 0===d&&(d=h.CONST_EXPR([])),a.call(this,null,null,{}),this._resolver=b,this._urlPath=c,this._urlParams=d}return f(b,a),Object.defineProperty(b.prototype,"urlPath",{get:function(){return h.isPresent(this.component)?this.component.urlPath:h.isPresent(this._urlPath)?this._urlPath:""},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"urlParams",{get:function(){return h.isPresent(this.component)?this.component.urlParams:h.isPresent(this._urlParams)?this._urlParams:[]},enumerable:!0,configurable:!0}),b.prototype.resolveComponent=function(){var a=this;return h.isPresent(this.component)?i.PromiseWrapper.resolve(this.component):this._resolver().then(function(b){return a.child=b.child,a.component=b.component})},b}(l);b.UnresolvedInstruction=o;var p=function(a){function b(b,c,d,e){a.call(this,b,c,d),this._specificity=e}return f(b,a),Object.defineProperty(b.prototype,"specificity",{get:function(){return this._specificity},enumerable:!0,configurable:!0}),b}(m);b.RedirectInstruction=p;var q=function(){function a(a,c,d,e,f,g,i){void 0===i&&(i=null),this.urlPath=a,this.urlParams=c,this.componentType=e,this.terminal=f,this.specificity=g,this.params=i,this.reuse=!1,this.routeData=h.isPresent(d)?d:b.BLANK_ROUTE_DATA}return a}();return b.ComponentInstruction=q,d.define=e,c.exports}),System.register("angular2/src/router/url_parser",["angular2/src/facade/collection","angular2/src/facade/lang","angular2/src/facade/exceptions"],!0,function(a,b,c){function d(a){for(var b=new m(a[a.length-1]),c=a.length-2;c>=0;c-=1)b=new m(a[c],b);return b}function e(a){var b=k.RegExpWrapper.firstMatch(o,a);return k.isPresent(b)?b[0]:""}function f(a){var b=[];return k.isPresent(a)&&j.StringMapWrapper.forEach(a,function(a,c){1==a?b.push(c):b.push(c+"="+a)}),b}var g=System.global,h=g.define;g.define=void 0;var i=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},j=a("angular2/src/facade/collection"),k=a("angular2/src/facade/lang"),l=a("angular2/src/facade/exceptions"),m=function(){function a(a,b,c,d){void 0===b&&(b=null),void 0===c&&(c=k.CONST_EXPR([])),void 0===d&&(d=null),this.path=a,this.child=b,this.auxiliary=c,this.params=d}return a.prototype.toString=function(){return this.path+this._matrixParamsToString()+this._auxToString()+this._childString()},a.prototype.segmentToString=function(){return this.path+this._matrixParamsToString()},a.prototype._auxToString=function(){return this.auxiliary.length>0?"("+this.auxiliary.map(function(a){return a.toString()}).join("//")+")":""},a.prototype._matrixParamsToString=function(){return k.isBlank(this.params)?"":";"+f(this.params).join(";")},a.prototype._childString=function(){return k.isPresent(this.child)?"/"+this.child.toString():""},a}();b.Url=m;var n=function(a){function b(b,c,d,e){void 0===c&&(c=null),void 0===d&&(d=k.CONST_EXPR([])),void 0===e&&(e=null),a.call(this,b,c,d,e)}return i(b,a),b.prototype.toString=function(){return this.path+this._auxToString()+this._childString()+this._queryParamsToString()},b.prototype.segmentToString=function(){return this.path+this._queryParamsToString()},b.prototype._queryParamsToString=function(){return k.isBlank(this.params)?"":"?"+f(this.params).join("&")},b}(m);b.RootUrl=n,b.pathSegmentsToUrl=d;var o=k.RegExpWrapper.create("^[^\\/\\(\\)\\?;=&#]+"),p=function(){function a(){}return a.prototype.peekStartsWith=function(a){return this._remaining.startsWith(a)},a.prototype.capture=function(a){if(!this._remaining.startsWith(a))throw new l.BaseException('Expected "'+a+'".');this._remaining=this._remaining.substring(a.length)},a.prototype.parse=function(a){return this._remaining=a,""==a||"/"==a?new m(""):this.parseRoot()},a.prototype.parseRoot=function(){this.peekStartsWith("/")&&this.capture("/");var a=e(this._remaining);this.capture(a);var b=[];this.peekStartsWith("(")&&(b=this.parseAuxiliaryRoutes()),this.peekStartsWith(";")&&this.parseMatrixParams();var c=null;this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),c=this.parseSegment());var d=null;return this.peekStartsWith("?")&&(d=this.parseQueryParams()),new n(a,c,b,d)},a.prototype.parseSegment=function(){if(0==this._remaining.length)return null;this.peekStartsWith("/")&&this.capture("/");var a=e(this._remaining);this.capture(a);var b=null;this.peekStartsWith(";")&&(b=this.parseMatrixParams());var c=[];this.peekStartsWith("(")&&(c=this.parseAuxiliaryRoutes());var d=null;return this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),d=this.parseSegment()),new m(a,d,c,b)},a.prototype.parseQueryParams=function(){var a={};for(this.capture("?"),this.parseParam(a);this._remaining.length>0&&this.peekStartsWith("&");)this.capture("&"),this.parseParam(a);return a},a.prototype.parseMatrixParams=function(){for(var a={};this._remaining.length>0&&this.peekStartsWith(";");)this.capture(";"),this.parseParam(a);return a},a.prototype.parseParam=function(a){var b=e(this._remaining);if(!k.isBlank(b)){this.capture(b);var c=!0;if(this.peekStartsWith("=")){this.capture("=");var d=e(this._remaining);k.isPresent(d)&&(c=d,this.capture(c))}a[b]=c}},a.prototype.parseAuxiliaryRoutes=function(){var a=[];for(this.capture("(");!this.peekStartsWith(")")&&this._remaining.length>0;)a.push(this.parseSegment()),this.peekStartsWith("//")&&this.capture("//");return this.capture(")"),a},a}();return b.UrlParser=p,b.parser=new p,b.serializeParams=f,g.define=h,c.exports}),System.register("angular2/src/router/async_route_handler",["angular2/src/facade/lang","angular2/src/router/instruction"],!0,function(a,b,c){var d=System.global,e=d.define;d.define=void 0;var f=a("angular2/src/facade/lang"),g=a("angular2/src/router/instruction"),h=function(){function a(a,b){void 0===b&&(b=null),this._loader=a,this._resolvedComponent=null,this.data=f.isPresent(b)?new g.RouteData(b):g.BLANK_ROUTE_DATA}return a.prototype.resolveComponentType=function(){var a=this;return f.isPresent(this._resolvedComponent)?this._resolvedComponent:this._resolvedComponent=this._loader().then(function(b){return a.componentType=b,b})},a}();return b.AsyncRouteHandler=h,d.define=e,c.exports}),System.register("angular2/src/router/sync_route_handler",["angular2/src/facade/async","angular2/src/facade/lang","angular2/src/router/instruction"],!0,function(a,b,c){var d=System.global,e=d.define;d.define=void 0;var f=a("angular2/src/facade/async"),g=a("angular2/src/facade/lang"),h=a("angular2/src/router/instruction"),i=function(){function a(a,b){this.componentType=a,this._resolvedComponent=null,this._resolvedComponent=f.PromiseWrapper.resolve(a),this.data=g.isPresent(b)?new h.RouteData(b):h.BLANK_ROUTE_DATA}return a.prototype.resolveComponentType=function(){return this._resolvedComponent},a}();return b.SyncRouteHandler=i,d.define=e,c.exports}),System.register("angular2/src/router/route_config_decorator",["angular2/src/router/route_config_impl","angular2/src/core/util/decorators","angular2/src/router/route_config_impl"],!0,function(a,b,c){var d=System.global,e=d.define;d.define=void 0;var f=a("angular2/src/router/route_config_impl"),g=a("angular2/src/core/util/decorators"),h=a("angular2/src/router/route_config_impl");return b.Route=h.Route,b.Redirect=h.Redirect,b.AuxRoute=h.AuxRoute,b.AsyncRoute=h.AsyncRoute,b.RouteConfig=g.makeDecorator(f.RouteConfig),d.define=e,c.exports}),System.register("angular2/src/router/location_strategy",["angular2/src/facade/lang","angular2/core"],!0,function(a,b,c){function d(a){return a.length>0&&"?"!=a.substring(0,1)?"?"+a:a}function e(a,b){if(0==a.length)return b;if(0==b.length)return a;var c=0;return a.endsWith("/")&&c++,b.startsWith("/")&&c++,2==c?a+b.substring(1):1==c?a+b:a+"/"+b}var f=System.global,g=f.define;f.define=void 0;var h=a("angular2/src/facade/lang"),i=a("angular2/core"),j=function(){function a(){}return a}();return b.LocationStrategy=j,b.APP_BASE_HREF=h.CONST_EXPR(new i.OpaqueToken("appBaseHref")),b.normalizeQueryParams=d,b.joinWithSlash=e,f.define=g,c.exports}),System.register("angular2/src/router/lifecycle_annotations_impl",["angular2/src/facade/lang"],!0,function(a,b,c){var d=System.global,e=d.define;d.define=void 0;var f=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},g=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},h=a("angular2/src/facade/lang"),i=function(){function a(a){this.name=a}return a=f([h.CONST(),g("design:paramtypes",[String])],a)}();b.RouteLifecycleHook=i;var j=function(){function a(a){this.fn=a}return a=f([h.CONST(),g("design:paramtypes",[Function])],a)}();return b.CanActivate=j,b.routerCanReuse=h.CONST_EXPR(new i("routerCanReuse")),b.routerCanDeactivate=h.CONST_EXPR(new i("routerCanDeactivate")),b.routerOnActivate=h.CONST_EXPR(new i("routerOnActivate")),b.routerOnReuse=h.CONST_EXPR(new i("routerOnReuse")),b.routerOnDeactivate=h.CONST_EXPR(new i("routerOnDeactivate")),d.define=e,c.exports}),System.register("angular2/src/router/lifecycle_annotations",["angular2/src/core/util/decorators","angular2/src/router/lifecycle_annotations_impl","angular2/src/router/lifecycle_annotations_impl"],!0,function(a,b,c){var d=System.global,e=d.define;d.define=void 0;var f=a("angular2/src/core/util/decorators"),g=a("angular2/src/router/lifecycle_annotations_impl"),h=a("angular2/src/router/lifecycle_annotations_impl");return b.routerCanReuse=h.routerCanReuse,b.routerCanDeactivate=h.routerCanDeactivate,b.routerOnActivate=h.routerOnActivate,b.routerOnReuse=h.routerOnReuse,b.routerOnDeactivate=h.routerOnDeactivate,b.CanActivate=f.makeDecorator(g.CanActivate),d.define=e,c.exports}),System.register("angular2/src/router/router_link",["angular2/core","angular2/src/facade/lang","angular2/src/router/router","angular2/src/router/location"],!0,function(a,b,c){var d=System.global,e=d.define;d.define=void 0;var f=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},g=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},h=a("angular2/core"),i=a("angular2/src/facade/lang"),j=a("angular2/src/router/router"),k=a("angular2/src/router/location"),l=function(){function a(a,b){var c=this;this._router=a,this._location=b,this._router.subscribe(function(a){return c._updateLink()})}return a.prototype._updateLink=function(){this._navigationInstruction=this._router.generate(this._routeParams);var a=this._navigationInstruction.toLinkUrl();this.visibleHref=this._location.prepareExternalUrl(a)},Object.defineProperty(a.prototype,"isRouteActive",{get:function(){return this._router.isRouteActive(this._navigationInstruction)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"routeParams",{set:function(a){this._routeParams=a,this._updateLink()},enumerable:!0,configurable:!0}),a.prototype.onClick=function(){return i.isString(this.target)&&"_self"!=this.target?!0:(this._router.navigateByInstruction(this._navigationInstruction),!1)},a=f([h.Directive({selector:"[routerLink]",inputs:["routeParams: routerLink","target: target"],host:{"(click)":"onClick()","[attr.href]":"visibleHref","[class.router-link-active]":"isRouteActive"}}),g("design:paramtypes",[j.Router,k.Location])],a)}();return b.RouterLink=l,d.define=e,c.exports}),System.register("angular2/src/router/platform_location",[],!0,function(a,b,c){var d=System.global,e=d.define;d.define=void 0;var f=function(){function a(){}return a}();return b.PlatformLocation=f,d.define=e,c.exports}),System.register("angular2/src/router/hash_location_strategy",["angular2/core","angular2/src/router/location_strategy","angular2/src/facade/lang","angular2/src/router/platform_location"],!0,function(a,b,c){var d=System.global,e=d.define;d.define=void 0;var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},h=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},i=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}},j=a("angular2/core"),k=a("angular2/src/router/location_strategy"),l=a("angular2/src/facade/lang"),m=a("angular2/src/router/platform_location"),n=function(a){function b(b,c){a.call(this),this._platformLocation=b,this._baseHref="",l.isPresent(c)&&(this._baseHref=c)}return f(b,a),b.prototype.onPopState=function(a){this._platformLocation.onPopState(a),this._platformLocation.onHashChange(a)},b.prototype.getBaseHref=function(){return this._baseHref},b.prototype.path=function(){var a=this._platformLocation.hash;return(a.length>0?a.substring(1):a)+k.normalizeQueryParams(this._platformLocation.search)},b.prototype.prepareExternalUrl=function(a){var b=k.joinWithSlash(this._baseHref,a);return b.length>0?"#"+b:b},b.prototype.pushState=function(a,b,c,d){var e=this.prepareExternalUrl(c+k.normalizeQueryParams(d));0==e.length&&(e=this._platformLocation.pathname),this._platformLocation.pushState(a,b,e)},b.prototype.replaceState=function(a,b,c,d){var e=this.prepareExternalUrl(c+k.normalizeQueryParams(d));0==e.length&&(e=this._platformLocation.pathname),this._platformLocation.replaceState(a,b,e)},b.prototype.forward=function(){this._platformLocation.forward()},b.prototype.back=function(){this._platformLocation.back()},b=g([j.Injectable(),i(1,j.Optional()),i(1,j.Inject(k.APP_BASE_HREF)),h("design:paramtypes",[m.PlatformLocation,String])],b)}(k.LocationStrategy);return b.HashLocationStrategy=n,d.define=e,c.exports}),System.register("angular2/src/router/path_location_strategy",["angular2/core","angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/src/router/location_strategy","angular2/src/router/platform_location"],!0,function(a,b,c){var d=System.global,e=d.define;d.define=void 0;var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},h=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},i=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}},j=a("angular2/core"),k=a("angular2/src/facade/lang"),l=a("angular2/src/facade/exceptions"),m=a("angular2/src/router/location_strategy"),n=a("angular2/src/router/platform_location"),o=function(a){function b(b,c){if(a.call(this),this._platformLocation=b,k.isBlank(c)&&(c=this._platformLocation.getBaseHrefFromDOM()),k.isBlank(c))throw new l.BaseException("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=c}return f(b,a),b.prototype.onPopState=function(a){this._platformLocation.onPopState(a),this._platformLocation.onHashChange(a)},b.prototype.getBaseHref=function(){return this._baseHref},b.prototype.prepareExternalUrl=function(a){return m.joinWithSlash(this._baseHref,a)},b.prototype.path=function(){return this._platformLocation.pathname+m.normalizeQueryParams(this._platformLocation.search)},b.prototype.pushState=function(a,b,c,d){var e=this.prepareExternalUrl(c+m.normalizeQueryParams(d));this._platformLocation.pushState(a,b,e)},b.prototype.replaceState=function(a,b,c,d){var e=this.prepareExternalUrl(c+m.normalizeQueryParams(d));this._platformLocation.replaceState(a,b,e)},b.prototype.forward=function(){this._platformLocation.forward()},b.prototype.back=function(){this._platformLocation.back()},b=g([j.Injectable(),i(1,j.Optional()),i(1,j.Inject(m.APP_BASE_HREF)),h("design:paramtypes",[n.PlatformLocation,String])],b)}(m.LocationStrategy);return b.PathLocationStrategy=o,d.define=e,c.exports}),System.register("angular2/src/router/route_definition",[],!0,function(a,b,c){var d=System.global,e=d.define;return d.define=void 0,d.define=e,c.exports}),System.register("angular2/src/router/router_providers_common",["angular2/src/router/location_strategy","angular2/src/router/path_location_strategy","angular2/src/router/router","angular2/src/router/route_registry","angular2/src/router/location","angular2/src/facade/lang","angular2/core","angular2/src/facade/exceptions"],!0,function(a,b,c){function d(a,b,c,d){var e=new j.RootRouter(a,b,c);return d.registerDisposeListener(function(){return e.dispose()}),e}function e(a){if(0==a.componentTypes.length)throw new o.BaseException("Bootstrap at least one component before injecting Router.");return a.componentTypes[0]}var f=System.global,g=f.define;f.define=void 0;var h=a("angular2/src/router/location_strategy"),i=a("angular2/src/router/path_location_strategy"),j=a("angular2/src/router/router"),k=a("angular2/src/router/route_registry"),l=a("angular2/src/router/location"),m=a("angular2/src/facade/lang"),n=a("angular2/core"),o=a("angular2/src/facade/exceptions");return b.ROUTER_PROVIDERS_COMMON=m.CONST_EXPR([k.RouteRegistry,m.CONST_EXPR(new n.Provider(h.LocationStrategy,{useClass:i.PathLocationStrategy})),l.Location,m.CONST_EXPR(new n.Provider(j.Router,{useFactory:d,deps:m.CONST_EXPR([k.RouteRegistry,l.Location,k.ROUTER_PRIMARY_COMPONENT,n.ApplicationRef])})),m.CONST_EXPR(new n.Provider(k.ROUTER_PRIMARY_COMPONENT,{useFactory:e,deps:m.CONST_EXPR([n.ApplicationRef])}))]),f.define=g,c.exports}),System.register("angular2/src/router/path_recognizer",["angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/src/facade/collection","angular2/src/router/url_parser"],!0,function(a,b,c){function d(a){return k.isBlank(a)?null:a.toString()}function e(a){a.startsWith("/")&&(a=a.substring(1));var b=g(a),c=[],d="";0==b.length&&(d+="2");for(var e=b.length-1,f=0;e>=f;f++){var h,i=b[f];if(k.isPresent(h=k.RegExpWrapper.firstMatch(t,i)))c.push(new r(h[1])),d+="1";else if(k.isPresent(h=k.RegExpWrapper.firstMatch(u,i)))c.push(new s(h[1])),d+="0";else if("..."==i){if(e>f)throw new l.BaseException('Unexpected "..." before the end of the path for "'+a+'".');c.push(new p)}else c.push(new q(i)),d+="2"}return{segments:c,specificity:d}}function f(a){return a.map(function(a){return a instanceof s?"*":a instanceof p?"...":a instanceof r?":":a instanceof q?a.path:void 0}).join("/")}function g(a){return a.split("/")}function h(a){if(k.StringWrapper.contains(a,"#"))throw new l.BaseException('Path "'+a+'" should not include "#". Use "HashLocationStrategy" instead.');var b=k.RegExpWrapper.firstMatch(v,a);if(k.isPresent(b))throw new l.BaseException('Path "'+a+'" contains "'+b[0]+'" which is not allowed in a route config.')}var i=System.global,j=i.define;i.define=void 0;var k=a("angular2/src/facade/lang"),l=a("angular2/src/facade/exceptions"),m=a("angular2/src/facade/collection"),n=a("angular2/src/router/url_parser"),o=function(){function a(a){var b=this;this.map={},this.keys={},k.isPresent(a)&&m.StringMapWrapper.forEach(a,function(a,c){b.map[c]=k.isPresent(a)?a.toString():null,b.keys[c]=!0})}return a.prototype.get=function(a){return m.StringMapWrapper["delete"](this.keys,a),this.map[a]},a.prototype.getUnused=function(){var a=this,b={},c=m.StringMapWrapper.keys(this.keys);return c.forEach(function(c){return b[c]=m.StringMapWrapper.get(a.map,c)}),b},a}(),p=function(){function a(){this.name=""}return a.prototype.generate=function(a){return""},a.prototype.match=function(a){return!0},a}(),q=function(){function a(a){this.path=a,this.name=""}return a.prototype.match=function(a){return a==this.path},a.prototype.generate=function(a){return this.path},a}(),r=function(){function a(a){this.name=a}return a.prototype.match=function(a){return a.length>0},a.prototype.generate=function(a){if(!m.StringMapWrapper.contains(a.map,this.name))throw new l.BaseException("Route generator for '"+this.name+"' was not included in parameters passed.");return d(a.get(this.name))},a}(),s=function(){function a(a){this.name=a}return a.prototype.match=function(a){return!0},a.prototype.generate=function(a){return d(a.get(this.name))},a}(),t=/^:([^\/]+)$/g,u=/^\*([^\/]+)$/g,v=k.RegExpWrapper.create("//|\\(|\\)|;|\\?|="),w=function(){function a(a){this.path=a,this.terminal=!0,h(a);var b=e(a);this._segments=b.segments,this.specificity=b.specificity,this.hash=f(this._segments);var c=this._segments[this._segments.length-1];this.terminal=!(c instanceof p);
}return a.prototype.recognize=function(a){for(var b,c=a,d={},e=[],f=0;f<this._segments.length;f+=1){var g=this._segments[f];if(b=c,g instanceof p)break;if(k.isPresent(b)){if(e.push(b.path),g instanceof s){d[g.name]=b.toString(),c=null;break}if(g instanceof r)d[g.name]=b.path;else if(!g.match(b.path))return null;c=b.child}else if(!g.match(""))return null}if(this.terminal&&k.isPresent(c))return null;var h,i,j,l=e.join("/");if(k.isPresent(b)){var o=a instanceof n.RootUrl?a:b;j=k.isPresent(o.params)?m.StringMapWrapper.merge(o.params,d):d,i=n.serializeParams(o.params),h=b.auxiliary}else j=d,h=[],i=[];return{urlPath:l,urlParams:i,allParams:j,auxiliary:h,nextSegment:c}},a.prototype.generate=function(a){for(var b=new o(a),c=[],d=0;d<this._segments.length;d++){var e=this._segments[d];e instanceof p||c.push(e.generate(b))}var f=c.join("/"),g=b.getUnused(),h=n.serializeParams(g);return{urlPath:f,urlParams:h}},a}();return b.PathRecognizer=w,i.define=j,c.exports}),System.register("angular2/src/router/component_recognizer",["angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/src/facade/collection","angular2/src/facade/async","angular2/src/router/route_recognizer","angular2/src/router/route_config_impl","angular2/src/router/async_route_handler","angular2/src/router/sync_route_handler"],!0,function(a,b,c){var d=System.global,e=d.define;d.define=void 0;var f=a("angular2/src/facade/lang"),g=a("angular2/src/facade/exceptions"),h=a("angular2/src/facade/collection"),i=a("angular2/src/facade/async"),j=a("angular2/src/router/route_recognizer"),k=a("angular2/src/router/route_config_impl"),l=a("angular2/src/router/async_route_handler"),m=a("angular2/src/router/sync_route_handler"),n=function(){function a(){this.names=new h.Map,this.auxNames=new h.Map,this.auxRoutes=new h.Map,this.matchers=[],this.defaultRoute=null}return a.prototype.config=function(a){var b;if(f.isPresent(a.name)&&a.name[0].toUpperCase()!=a.name[0]){var c=a.name[0].toUpperCase()+a.name.substring(1);throw new g.BaseException('Route "'+a.path+'" with name "'+a.name+'" does not begin with an uppercase letter. Route names should be CamelCase like "'+c+'".')}if(a instanceof k.AuxRoute){b=new m.SyncRouteHandler(a.component,a.data);var d=a.path.startsWith("/")?a.path.substring(1):a.path,e=new j.RouteRecognizer(a.path,b);return this.auxRoutes.set(d,e),f.isPresent(a.name)&&this.auxNames.set(a.name,e),e.terminal}var h=!1;if(a instanceof k.Redirect){var i=new j.RedirectRecognizer(a.path,a.redirectTo);return this._assertNoHashCollision(i.hash,a.path),this.matchers.push(i),!0}a instanceof k.Route?(b=new m.SyncRouteHandler(a.component,a.data),h=f.isPresent(a.useAsDefault)&&a.useAsDefault):a instanceof k.AsyncRoute&&(b=new l.AsyncRouteHandler(a.loader,a.data),h=f.isPresent(a.useAsDefault)&&a.useAsDefault);var e=new j.RouteRecognizer(a.path,b);if(this._assertNoHashCollision(e.hash,a.path),h){if(f.isPresent(this.defaultRoute))throw new g.BaseException("Only one route can be default");this.defaultRoute=e}return this.matchers.push(e),f.isPresent(a.name)&&this.names.set(a.name,e),e.terminal},a.prototype._assertNoHashCollision=function(a,b){this.matchers.forEach(function(c){if(a==c.hash)throw new g.BaseException("Configuration '"+b+"' conflicts with existing route '"+c.path+"'")})},a.prototype.recognize=function(a){var b=[];return this.matchers.forEach(function(c){var d=c.recognize(a);f.isPresent(d)&&b.push(d)}),0==b.length&&f.isPresent(a)&&a.auxiliary.length>0?[i.PromiseWrapper.resolve(new j.PathMatch(null,null,a.auxiliary))]:b},a.prototype.recognizeAuxiliary=function(a){var b=this.auxRoutes.get(a.path);return f.isPresent(b)?[b.recognize(a)]:[i.PromiseWrapper.resolve(null)]},a.prototype.hasRoute=function(a){return this.names.has(a)},a.prototype.componentLoaded=function(a){return this.hasRoute(a)&&f.isPresent(this.names.get(a).handler.componentType)},a.prototype.loadComponent=function(a){return this.names.get(a).handler.resolveComponentType()},a.prototype.generate=function(a,b){var c=this.names.get(a);return f.isBlank(c)?null:c.generate(b)},a.prototype.generateAuxiliary=function(a,b){var c=this.auxNames.get(a);return f.isBlank(c)?null:c.generate(b)},a}();return b.ComponentRecognizer=n,d.define=e,c.exports}),System.register("angular2/src/router/route_config_nomalizer",["angular2/src/router/route_config_decorator","angular2/src/facade/lang","angular2/src/facade/exceptions"],!0,function(a,b,c){function d(a,b){if(a instanceof i.AsyncRoute){var c=e(a.loader,b);return new i.AsyncRoute({path:a.path,loader:c,name:a.name,data:a.data,useAsDefault:a.useAsDefault})}if(a instanceof i.Route||a instanceof i.Redirect||a instanceof i.AuxRoute)return a;if(+!!a.component+ +!!a.redirectTo+ +!!a.loader!=1)throw new k.BaseException('Route config should contain exactly one "component", "loader", or "redirectTo" property.');if(a.as&&a.name)throw new k.BaseException('Route config should contain exactly one "as" or "name" property.');if(a.as&&(a.name=a.as),a.loader){var c=e(a.loader,b);return new i.AsyncRoute({path:a.path,loader:c,name:a.name,useAsDefault:a.useAsDefault})}if(a.aux)return new i.AuxRoute({path:a.aux,component:a.component,name:a.name});if(a.component){if("object"==typeof a.component){var d=a.component;if("constructor"==d.type)return new i.Route({path:a.path,component:d.constructor,name:a.name,data:a.data,useAsDefault:a.useAsDefault});if("loader"==d.type)return new i.AsyncRoute({path:a.path,loader:d.loader,name:a.name,useAsDefault:a.useAsDefault});throw new k.BaseException('Invalid component type "'+d.type+'". Valid types are "constructor" and "loader".')}return new i.Route(a)}return a.redirectTo?new i.Redirect({path:a.path,redirectTo:a.redirectTo}):a}function e(a,b){return function(){return a().then(function(a){return b.configFromComponent(a),a})}}function f(a,b){if(!j.isType(a))throw new k.BaseException('Component for route "'+b+'" is not defined, or is not a class.')}var g=System.global,h=g.define;g.define=void 0;var i=a("angular2/src/router/route_config_decorator"),j=a("angular2/src/facade/lang"),k=a("angular2/src/facade/exceptions");return b.normalizeRouteConfig=d,b.assertComponentExists=f,g.define=h,c.exports}),System.register("angular2/src/router/location",["angular2/src/router/location_strategy","angular2/src/facade/async","angular2/core"],!0,function(a,b,c){function d(a,b){return a.length>0&&b.startsWith(a)?b.substring(a.length):b}function e(a){return/\/index.html$/g.test(a)?a.substring(0,a.length-11):a}function f(a){return/\/$/g.test(a)&&(a=a.substring(0,a.length-1)),a}var g=System.global,h=g.define;g.define=void 0;var i=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},j=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},k=a("angular2/src/router/location_strategy"),l=a("angular2/src/facade/async"),m=a("angular2/core"),n=function(){function a(a){var b=this;this.platformStrategy=a,this._subject=new l.EventEmitter;var c=this.platformStrategy.getBaseHref();this._baseHref=f(e(c)),this.platformStrategy.onPopState(function(a){l.ObservableWrapper.callEmit(b._subject,{url:b.path(),pop:!0,type:a.type})})}return a.prototype.path=function(){return this.normalize(this.platformStrategy.path())},a.prototype.normalize=function(a){return f(d(this._baseHref,e(a)))},a.prototype.prepareExternalUrl=function(a){return a.length>0&&!a.startsWith("/")&&(a="/"+a),this.platformStrategy.prepareExternalUrl(a)},a.prototype.go=function(a,b){void 0===b&&(b=""),this.platformStrategy.pushState(null,"",a,b)},a.prototype.replaceState=function(a,b){void 0===b&&(b=""),this.platformStrategy.replaceState(null,"",a,b)},a.prototype.forward=function(){this.platformStrategy.forward()},a.prototype.back=function(){this.platformStrategy.back()},a.prototype.subscribe=function(a,b,c){return void 0===b&&(b=null),void 0===c&&(c=null),l.ObservableWrapper.subscribe(this._subject,a,b,c)},a=i([m.Injectable(),j("design:paramtypes",[k.LocationStrategy])],a)}();return b.Location=n,g.define=h,c.exports}),System.register("angular2/src/router/route_lifecycle_reflector",["angular2/src/facade/lang","angular2/src/router/lifecycle_annotations_impl","angular2/src/core/reflection/reflection"],!0,function(a,b,c){function d(a,b){return b instanceof h.Type?a.name in b.prototype:!1}function e(a){for(var b=j.reflector.annotations(a),c=0;c<b.length;c+=1){var d=b[c];if(d instanceof i.CanActivate)return d.fn}return null}var f=System.global,g=f.define;f.define=void 0;var h=a("angular2/src/facade/lang"),i=a("angular2/src/router/lifecycle_annotations_impl"),j=a("angular2/src/core/reflection/reflection");return b.hasLifecycleHook=d,b.getCanActivateHook=e,f.define=g,c.exports}),System.register("angular2/src/router/router_outlet",["angular2/src/facade/async","angular2/src/facade/collection","angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/core","angular2/src/router/router","angular2/src/router/instruction","angular2/src/router/lifecycle_annotations","angular2/src/router/route_lifecycle_reflector"],!0,function(a,b,c){var d=System.global,e=d.define;d.define=void 0;var f=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},g=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},h=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}},i=a("angular2/src/facade/async"),j=a("angular2/src/facade/collection"),k=a("angular2/src/facade/lang"),l=a("angular2/src/facade/exceptions"),m=a("angular2/core"),n=a("angular2/src/router/router"),o=a("angular2/src/router/instruction"),p=a("angular2/src/router/lifecycle_annotations"),q=a("angular2/src/router/route_lifecycle_reflector"),r=i.PromiseWrapper.resolve(!0),s=function(){function a(a,b,c,d){this._elementRef=a,this._loader=b,this._parentRouter=c,this.name=null,this._componentRef=null,this._currentInstruction=null,k.isPresent(d)?(this.name=d,this._parentRouter.registerAuxOutlet(this)):this._parentRouter.registerPrimaryOutlet(this)}return a.prototype.activate=function(a){var b=this,c=this._currentInstruction;this._currentInstruction=a;var d=a.componentType,e=this._parentRouter.childRouter(d),f=m.Injector.resolve([m.provide(o.RouteData,{useValue:a.routeData}),m.provide(o.RouteParams,{useValue:new o.RouteParams(a.params)}),m.provide(n.Router,{useValue:e})]);return this._loader.loadNextToLocation(d,this._elementRef,f).then(function(e){return b._componentRef=e,q.hasLifecycleHook(p.routerOnActivate,d)?b._componentRef.instance.routerOnActivate(a,c):void 0})},a.prototype.reuse=function(a){var b=this._currentInstruction;if(this._currentInstruction=a,k.isBlank(this._componentRef))throw new l.BaseException("Cannot reuse an outlet that does not contain a component.");return i.PromiseWrapper.resolve(q.hasLifecycleHook(p.routerOnReuse,this._currentInstruction.componentType)?this._componentRef.instance.routerOnReuse(a,b):!0)},a.prototype.deactivate=function(a){var b=this,c=r;return k.isPresent(this._componentRef)&&k.isPresent(this._currentInstruction)&&q.hasLifecycleHook(p.routerOnDeactivate,this._currentInstruction.componentType)&&(c=i.PromiseWrapper.resolve(this._componentRef.instance.routerOnDeactivate(a,this._currentInstruction))),c.then(function(a){k.isPresent(b._componentRef)&&(b._componentRef.dispose(),b._componentRef=null)})},a.prototype.routerCanDeactivate=function(a){return k.isBlank(this._currentInstruction)?r:q.hasLifecycleHook(p.routerCanDeactivate,this._currentInstruction.componentType)?i.PromiseWrapper.resolve(this._componentRef.instance.routerCanDeactivate(a,this._currentInstruction)):r},a.prototype.routerCanReuse=function(a){var b;return b=k.isBlank(this._currentInstruction)||this._currentInstruction.componentType!=a.componentType?!1:q.hasLifecycleHook(p.routerCanReuse,this._currentInstruction.componentType)?this._componentRef.instance.routerCanReuse(a,this._currentInstruction):a==this._currentInstruction||k.isPresent(a.params)&&k.isPresent(this._currentInstruction.params)&&j.StringMapWrapper.equals(a.params,this._currentInstruction.params),i.PromiseWrapper.resolve(b)},a=f([m.Directive({selector:"router-outlet"}),h(3,m.Attribute("name")),g("design:paramtypes",[m.ElementRef,m.DynamicComponentLoader,n.Router,String])],a)}();return b.RouterOutlet=s,d.define=e,c.exports}),System.register("angular2/src/router/browser_platform_location",["angular2/core","angular2/src/router/platform_location","angular2/src/platform/dom/dom_adapter"],!0,function(a,b,c){var d=System.global,e=d.define;d.define=void 0;var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},h=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},i=a("angular2/core"),j=a("angular2/src/router/platform_location"),k=a("angular2/src/platform/dom/dom_adapter"),l=function(a){function b(){a.call(this),this._init()}return f(b,a),b.prototype._init=function(){this._location=k.DOM.getLocation(),this._history=k.DOM.getHistory()},Object.defineProperty(b.prototype,"location",{get:function(){return this._location},enumerable:!0,configurable:!0}),b.prototype.getBaseHrefFromDOM=function(){return k.DOM.getBaseHref()},b.prototype.onPopState=function(a){k.DOM.getGlobalEventTarget("window").addEventListener("popstate",a,!1)},b.prototype.onHashChange=function(a){k.DOM.getGlobalEventTarget("window").addEventListener("hashchange",a,!1)},Object.defineProperty(b.prototype,"pathname",{get:function(){return this._location.pathname},set:function(a){this._location.pathname=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"search",{get:function(){return this._location.search},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"hash",{get:function(){return this._location.hash},enumerable:!0,configurable:!0}),b.prototype.pushState=function(a,b,c){this._history.pushState(a,b,c)},b.prototype.replaceState=function(a,b,c){this._history.replaceState(a,b,c)},b.prototype.forward=function(){this._history.forward()},b.prototype.back=function(){this._history.back()},b=g([i.Injectable(),h("design:paramtypes",[])],b)}(j.PlatformLocation);return b.BrowserPlatformLocation=l,d.define=e,c.exports}),System.register("angular2/src/router/route_recognizer",["angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/src/facade/promise","angular2/src/facade/collection","angular2/src/router/instruction","angular2/src/router/path_recognizer"],!0,function(a,b,c){var d=System.global,e=d.define;d.define=void 0;var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("angular2/src/facade/lang"),h=a("angular2/src/facade/exceptions"),i=a("angular2/src/facade/promise"),j=a("angular2/src/facade/collection"),k=a("angular2/src/router/instruction"),l=a("angular2/src/router/path_recognizer"),m=function(){function a(){}return a}();b.RouteMatch=m;var n=function(a){function b(b,c,d){a.call(this),this.instruction=b,this.remaining=c,this.remainingAux=d}return f(b,a),b}(m);b.PathMatch=n;var o=function(a){function b(b,c){a.call(this),this.redirectTo=b,this.specificity=c}return f(b,a),b}(m);b.RedirectMatch=o;var p=function(){function a(a,b){this.path=a,this.redirectTo=b,this._pathRecognizer=new l.PathRecognizer(a),this.hash=this._pathRecognizer.hash}return a.prototype.recognize=function(a){var b=null;return g.isPresent(this._pathRecognizer.recognize(a))&&(b=new o(this.redirectTo,this._pathRecognizer.specificity)),i.PromiseWrapper.resolve(b)},a.prototype.generate=function(a){throw new h.BaseException("Tried to generate a redirect.")},a}();b.RedirectRecognizer=p;var q=function(){function a(a,b){this.path=a,this.handler=b,this.terminal=!0,this._cache=new j.Map,this._pathRecognizer=new l.PathRecognizer(a),this.specificity=this._pathRecognizer.specificity,this.hash=this._pathRecognizer.hash,this.terminal=this._pathRecognizer.terminal}return a.prototype.recognize=function(a){var b=this,c=this._pathRecognizer.recognize(a);return g.isBlank(c)?null:this.handler.resolveComponentType().then(function(a){var d=b._getInstruction(c.urlPath,c.urlParams,c.allParams);return new n(d,c.nextSegment,c.auxiliary)})},a.prototype.generate=function(a){var b=this._pathRecognizer.generate(a),c=b.urlPath,d=b.urlParams;return this._getInstruction(c,d,a)},a.prototype.generateComponentPathValues=function(a){return this._pathRecognizer.generate(a)},a.prototype._getInstruction=function(a,b,c){if(g.isBlank(this.handler.componentType))throw new h.BaseException("Tried to get instruction before the type was loaded.");var d=a+"?"+b.join("?");if(this._cache.has(d))return this._cache.get(d);var e=new k.ComponentInstruction(a,b,this.handler.data,this.handler.componentType,this.terminal,this.specificity,c);return this._cache.set(d,e),e},a}();return b.RouteRecognizer=q,d.define=e,c.exports}),System.register("angular2/src/router/router_providers",["angular2/router","angular2/core","angular2/src/facade/lang","angular2/src/router/browser_platform_location","angular2/src/router/platform_location"],!0,function(a,b,c){var d=System.global,e=d.define;d.define=void 0;var f=a("angular2/router"),g=a("angular2/core"),h=a("angular2/src/facade/lang"),i=a("angular2/src/router/browser_platform_location"),j=a("angular2/src/router/platform_location");return b.ROUTER_PROVIDERS=h.CONST_EXPR([f.ROUTER_PROVIDERS_COMMON,h.CONST_EXPR(new g.Provider(j.PlatformLocation,{useClass:i.BrowserPlatformLocation}))]),b.ROUTER_BINDINGS=b.ROUTER_PROVIDERS,d.define=e,c.exports}),System.register("angular2/src/router/route_registry",["angular2/src/facade/collection","angular2/src/facade/async","angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/src/core/reflection/reflection","angular2/core","angular2/src/router/route_config_impl","angular2/src/router/route_recognizer","angular2/src/router/component_recognizer","angular2/src/router/instruction","angular2/src/router/route_config_nomalizer","angular2/src/router/url_parser"],!0,function(a,b,c){function d(a){return a.reduce(function(a,b){if(o.isString(b)){var c=b;return a.concat(c.split("/"))}return a.push(b),a},[])}function e(a){if(a=a.filter(function(a){return o.isPresent(a)}),0==a.length)return null;if(1==a.length)return a[0];var b=a[0],c=a.slice(1);return c.reduce(function(a,b){return-1==f(b.specificity,a.specificity)?b:a},b)}function f(a,b){for(var c=o.Math.min(a.length,b.length),d=0;c>d;d+=1){var e=o.StringWrapper.charCodeAt(a,d),f=o.StringWrapper.charCodeAt(b,d),g=f-e;if(0!=g)return g}return a.length-b.length}function g(a,b){if(o.isType(a)){var c=q.reflector.annotations(a);if(o.isPresent(c))for(var d=0;d<c.length;d++){var e=c[d];if(e instanceof s.RouteConfig)throw new p.BaseException('Child routes are not allowed for "'+b+'". Use "..." on the parent\'s route path.')}}}var h=System.global,i=h.define;h.define=void 0;var j=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},k=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},l=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}},m=a("angular2/src/facade/collection"),n=a("angular2/src/facade/async"),o=a("angular2/src/facade/lang"),p=a("angular2/src/facade/exceptions"),q=a("angular2/src/core/reflection/reflection"),r=a("angular2/core"),s=a("angular2/src/router/route_config_impl"),t=a("angular2/src/router/route_recognizer"),u=a("angular2/src/router/component_recognizer"),v=a("angular2/src/router/instruction"),w=a("angular2/src/router/route_config_nomalizer"),x=a("angular2/src/router/url_parser"),y=n.PromiseWrapper.resolve(null);b.ROUTER_PRIMARY_COMPONENT=o.CONST_EXPR(new r.OpaqueToken("RouterPrimaryComponent"));var z=function(){function a(a){this._rootComponent=a,this._rules=new m.Map}return a.prototype.config=function(a,b){b=w.normalizeRouteConfig(b,this),b instanceof s.Route?w.assertComponentExists(b.component,b.path):b instanceof s.AuxRoute&&w.assertComponentExists(b.component,b.path);var c=this._rules.get(a);o.isBlank(c)&&(c=new u.ComponentRecognizer,this._rules.set(a,c));var d=c.config(b);b instanceof s.Route&&(d?g(b.component,b.path):this.configFromComponent(b.component))},a.prototype.configFromComponent=function(a){var b=this;if(o.isType(a)&&!this._rules.has(a)){var c=q.reflector.annotations(a);if(o.isPresent(c))for(var d=0;d<c.length;d++){var e=c[d];if(e instanceof s.RouteConfig){var f=e.configs;f.forEach(function(c){return b.config(a,c)})}}}},a.prototype.recognize=function(a,b){var c=x.parser.parse(a);return this._recognize(c,[])},a.prototype._recognize=function(a,b,c){var d=this;void 0===c&&(c=!1);var f=m.ListWrapper.last(b),g=o.isPresent(f)?f.component.componentType:this._rootComponent,h=this._rules.get(g);if(o.isBlank(h))return y;var i=c?h.recognizeAuxiliary(a):h.recognize(a),j=i.map(function(a){return a.then(function(a){if(a instanceof t.PathMatch){var c=b.length>0?[m.ListWrapper.last(b)]:[],e=d._auxRoutesToUnresolved(a.remainingAux,c),f=new v.ResolvedInstruction(a.instruction,null,e);if(o.isBlank(a.instruction)||a.instruction.terminal)return f;var g=b.concat([f]);return d._recognize(a.remaining,g).then(function(a){return o.isBlank(a)?null:a instanceof v.RedirectInstruction?a:(f.child=a,f)})}if(a instanceof t.RedirectMatch){var f=d.generate(a.redirectTo,b.concat([null]));return new v.RedirectInstruction(f.component,f.child,f.auxInstruction,a.specificity)}})});return!o.isBlank(a)&&""!=a.path||0!=i.length?n.PromiseWrapper.all(j).then(e):n.PromiseWrapper.resolve(this.generateDefault(g))},a.prototype._auxRoutesToUnresolved=function(a,b){var c=this,d={};return a.forEach(function(a){d[a.path]=new v.UnresolvedInstruction(function(){return c._recognize(a,b,!0)})}),d},a.prototype.generate=function(a,b,c){void 0===c&&(c=!1);var e,f=d(a);if(""==m.ListWrapper.first(f))f.shift(),e=m.ListWrapper.first(b),b=[];else if(e=b.length>0?b.pop():null,"."==m.ListWrapper.first(f))f.shift();else if(".."==m.ListWrapper.first(f))for(;".."==m.ListWrapper.first(f);){if(b.length<=0)throw new p.BaseException('Link "'+m.ListWrapper.toJSON(a)+'" has too many "../" segments.');e=b.pop(),f=m.ListWrapper.slice(f,1)}else{var g=m.ListWrapper.first(f),h=this._rootComponent,i=null;if(b.length>1){var j=b[b.length-1],k=b[b.length-2];h=j.component.componentType,i=k.component.componentType}else 1==b.length&&(h=b[0].component.componentType,i=this._rootComponent);var l=this.hasRoute(g,h),n=o.isPresent(i)&&this.hasRoute(g,i);if(n&&l){var q='Link "'+m.ListWrapper.toJSON(a)+'" is ambiguous, use "./" or "../" to disambiguate.';throw new p.BaseException(q)}n&&(e=b.pop())}if(""==f[f.length-1]&&f.pop(),f.length>0&&""==f[0]&&f.shift(),f.length<1){var q='Link "'+m.ListWrapper.toJSON(a)+'" must include a route name.';throw new p.BaseException(q)}for(var r=this._generate(f,b,e,c,a),s=b.length-1;s>=0;s--){var t=b[s];if(o.isBlank(t))break;r=t.replaceChild(r)}return r},a.prototype._generate=function(a,b,c,d,e){var f=this;void 0===d&&(d=!1);var g=this._rootComponent,h=null,i={},j=m.ListWrapper.last(b);if(o.isPresent(j)&&o.isPresent(j.component)&&(g=j.component.componentType),0==a.length){var k=this.generateDefault(g);if(o.isBlank(k))throw new p.BaseException('Link "'+m.ListWrapper.toJSON(e)+'" does not resolve to a terminal instruction.');return k}o.isPresent(c)&&!d&&(i=m.StringMapWrapper.merge(c.auxInstruction,i),h=c.component);var l=this._rules.get(g);if(o.isBlank(l))throw new p.BaseException('Component "'+o.getTypeNameForDebugging(g)+'" has no route config.');var n=0,q={};if(n<a.length&&o.isString(a[n])){var r=a[n];if(""==r||"."==r||".."==r)throw new p.BaseException('"'+r+'/" is only allowed at the beginning of a link DSL.');if(n+=1,n<a.length){var s=a[n];o.isStringMap(s)&&!o.isArray(s)&&(q=s,n+=1)}var t=(d?l.auxNames:l.names).get(r);if(o.isBlank(t))throw new p.BaseException('Component "'+o.getTypeNameForDebugging(g)+'" has no route named "'+r+'".');if(o.isBlank(t.handler.componentType)){var u=t.generateComponentPathValues(q);return new v.UnresolvedInstruction(function(){return t.handler.resolveComponentType().then(function(g){return f._generate(a,b,c,d,e)})},u.urlPath,u.urlParams)}h=d?l.generateAuxiliary(r,q):l.generate(r,q)}for(;n<a.length&&o.isArray(a[n]);){var w=[j],x=this._generate(a[n],w,null,!0,e);i[x.component.urlPath]=x,n+=1}var y=new v.ResolvedInstruction(h,null,i);if(o.isPresent(h)&&o.isPresent(h.componentType)){var z=null;if(h.terminal)n>=a.length;else{var A=b.concat([y]),B=a.slice(n);z=this._generate(B,A,null,!1,e)}y.child=z}return y},a.prototype.hasRoute=function(a,b){var c=this._rules.get(b);return o.isBlank(c)?!1:c.hasRoute(a)},a.prototype.generateDefault=function(a){var b=this;if(o.isBlank(a))return null;var c=this._rules.get(a);if(o.isBlank(c)||o.isBlank(c.defaultRoute))return null;var d=null;if(o.isPresent(c.defaultRoute.handler.componentType)){var e=c.defaultRoute.generate({});return c.defaultRoute.terminal||(d=this.generateDefault(c.defaultRoute.handler.componentType)),new v.DefaultInstruction(e,d)}return new v.UnresolvedInstruction(function(){return c.defaultRoute.handler.resolveComponentType().then(function(c){return b.generateDefault(a)})})},a=j([r.Injectable(),l(0,r.Inject(b.ROUTER_PRIMARY_COMPONENT)),k("design:paramtypes",[o.Type])],a)}();return b.RouteRegistry=z,h.define=i,c.exports}),System.register("angular2/src/router/router",["angular2/src/facade/async","angular2/src/facade/collection","angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/core","angular2/src/router/route_registry","angular2/src/router/location","angular2/src/router/route_lifecycle_reflector"],!0,function(a,b,c){function d(a,b){var c=s;return m.isBlank(a.component)?c:(m.isPresent(a.child)&&(c=d(a.child,m.isPresent(b)?b.child:null)),c.then(function(c){if(0==c)return!1;if(a.component.reuse)return!0;var d=r.getCanActivateHook(a.component.componentType);return m.isPresent(d)?d(a.component,m.isPresent(b)?b.component:null):!0}))}var e=System.global,f=e.define;e.define=void 0;var g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},h=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},i=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0},j=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}},k=a("angular2/src/facade/async"),l=a("angular2/src/facade/collection"),m=a("angular2/src/facade/lang"),n=a("angular2/src/facade/exceptions"),o=a("angular2/core"),p=a("angular2/src/router/route_registry"),q=a("angular2/src/router/location"),r=a("angular2/src/router/route_lifecycle_reflector"),s=k.PromiseWrapper.resolve(!0),t=k.PromiseWrapper.resolve(!1),u=function(){function a(a,b,c){this.registry=a,this.parent=b,this.hostComponent=c,this.navigating=!1,this._currentInstruction=null,this._currentNavigation=s,this._outlet=null,this._auxRouters=new l.Map,this._subject=new k.EventEmitter}return a.prototype.childRouter=function(a){return this._childRouter=new w(this,a)},a.prototype.auxRouter=function(a){return new w(this,a)},a.prototype.registerPrimaryOutlet=function(a){if(m.isPresent(a.name))throw new n.BaseException("registerPrimaryOutlet expects to be called with an unnamed outlet.");return this._outlet=a,m.isPresent(this._currentInstruction)?this.commit(this._currentInstruction,!1):s},a.prototype.registerAuxOutlet=function(a){var b=a.name;if(m.isBlank(b))throw new n.BaseException("registerAuxOutlet expects to be called with an outlet with a name.");var c=this.auxRouter(this.hostComponent);this._auxRouters.set(b,c),c._outlet=a;var d;return m.isPresent(this._currentInstruction)&&m.isPresent(d=this._currentInstruction.auxInstruction[b])?c.commit(d):s},a.prototype.isRouteActive=function(a){for(var b=this;m.isPresent(b.parent)&&m.isPresent(a.child);)b=b.parent,a=a.child;return m.isPresent(this._currentInstruction)&&this._currentInstruction.component==a.component},a.prototype.config=function(a){var b=this;return a.forEach(function(a){b.registry.config(b.hostComponent,a)}),this.renavigate()},a.prototype.navigate=function(a){var b=this.generate(a);return this.navigateByInstruction(b,!1)},a.prototype.navigateByUrl=function(a,b){var c=this;return void 0===b&&(b=!1),this._currentNavigation=this._currentNavigation.then(function(d){return c.lastNavigationAttempt=a,c._startNavigating(),c._afterPromiseFinishNavigating(c.recognize(a).then(function(a){return m.isBlank(a)?!1:c._navigate(a,b)}))})},a.prototype.navigateByInstruction=function(a,b){var c=this;return void 0===b&&(b=!1),m.isBlank(a)?t:this._currentNavigation=this._currentNavigation.then(function(d){return c._startNavigating(),c._afterPromiseFinishNavigating(c._navigate(a,b))})},a.prototype._navigate=function(a,b){var c=this;return this._settleInstruction(a).then(function(b){return c._routerCanReuse(a)}).then(function(b){return c._canActivate(a)}).then(function(d){return d?c._routerCanDeactivate(a).then(function(d){return d?c.commit(a,b).then(function(b){return c._emitNavigationFinish(a.toRootUrl()),!0}):void 0}):!1})},a.prototype._settleInstruction=function(a){var b=this;return a.resolveComponent().then(function(c){var d=[];return m.isPresent(a.component)&&(a.component.reuse=!1),m.isPresent(a.child)&&d.push(b._settleInstruction(a.child)),l.StringMapWrapper.forEach(a.auxInstruction,function(a,c){d.push(b._settleInstruction(a))}),k.PromiseWrapper.all(d)})},a.prototype._emitNavigationFinish=function(a){k.ObservableWrapper.callEmit(this._subject,a)},a.prototype._afterPromiseFinishNavigating=function(a){var b=this;return k.PromiseWrapper.catchError(a.then(function(a){return b._finishNavigating()}),function(a){throw b._finishNavigating(),a})},a.prototype._routerCanReuse=function(a){var b=this;return m.isBlank(this._outlet)?t:m.isBlank(a.component)?s:this._outlet.routerCanReuse(a.component).then(function(c){return a.component.reuse=c,c&&m.isPresent(b._childRouter)&&m.isPresent(a.child)?b._childRouter._routerCanReuse(a.child):void 0})},a.prototype._canActivate=function(a){return d(a,this._currentInstruction)},a.prototype._routerCanDeactivate=function(a){var b=this;if(m.isBlank(this._outlet))return s;var c,d=null,e=!1,f=null;return m.isPresent(a)&&(d=a.child,f=a.component,e=m.isBlank(a.component)||a.component.reuse),
c=e?s:this._outlet.routerCanDeactivate(f),c.then(function(a){return 0==a?!1:m.isPresent(b._childRouter)?b._childRouter._routerCanDeactivate(d):!0})},a.prototype.commit=function(a,b){var c=this;void 0===b&&(b=!1),this._currentInstruction=a;var d=s;if(m.isPresent(this._outlet)&&m.isPresent(a.component)){var e=a.component;d=e.reuse?this._outlet.reuse(e):this.deactivate(a).then(function(a){return c._outlet.activate(e)}),m.isPresent(a.child)&&(d=d.then(function(b){return m.isPresent(c._childRouter)?c._childRouter.commit(a.child):void 0}))}var f=[];return this._auxRouters.forEach(function(b,c){m.isPresent(a.auxInstruction[c])&&f.push(b.commit(a.auxInstruction[c]))}),d.then(function(a){return k.PromiseWrapper.all(f)})},a.prototype._startNavigating=function(){this.navigating=!0},a.prototype._finishNavigating=function(){this.navigating=!1},a.prototype.subscribe=function(a){return k.ObservableWrapper.subscribe(this._subject,a)},a.prototype.deactivate=function(a){var b=this,c=null,d=null;m.isPresent(a)&&(c=a.child,d=a.component);var e=s;return m.isPresent(this._childRouter)&&(e=this._childRouter.deactivate(c)),m.isPresent(this._outlet)&&(e=e.then(function(a){return b._outlet.deactivate(d)})),e},a.prototype.recognize=function(a){var b=this._getAncestorInstructions();return this.registry.recognize(a,b)},a.prototype._getAncestorInstructions=function(){for(var a=[this._currentInstruction],b=this;m.isPresent(b=b.parent);)a.unshift(b._currentInstruction);return a},a.prototype.renavigate=function(){return m.isBlank(this.lastNavigationAttempt)?this._currentNavigation:this.navigateByUrl(this.lastNavigationAttempt)},a.prototype.generate=function(a){var b=this._getAncestorInstructions();return this.registry.generate(a,b)},a}();b.Router=u;var v=function(a){function b(b,c,d){var e=this;a.call(this,b,null,d),this._location=c,this._locationSub=this._location.subscribe(function(a){e.recognize(a.url).then(function(b){e.navigateByInstruction(b,m.isPresent(a.pop)).then(function(c){if(!m.isPresent(a.pop)||"hashchange"==a.type){var d=b.toUrlPath(),f=b.toUrlQuery();d.length>0&&(d="/"+d),"hashchange"==a.type?b.toRootUrl()!=e._location.path()&&e._location.replaceState(d,f):e._location.go(d,f)}})})}),this.registry.configFromComponent(d),this.navigateByUrl(c.path())}return g(b,a),b.prototype.commit=function(b,c){var d=this;void 0===c&&(c=!1);var e=b.toUrlPath(),f=b.toUrlQuery();e.length>0&&(e="/"+e);var g=a.prototype.commit.call(this,b);return c||(g=g.then(function(a){d._location.go(e,f)})),g},b.prototype.dispose=function(){m.isPresent(this._locationSub)&&(k.ObservableWrapper.dispose(this._locationSub),this._locationSub=null)},b=h([o.Injectable(),j(2,o.Inject(p.ROUTER_PRIMARY_COMPONENT)),i("design:paramtypes",[p.RouteRegistry,q.Location,m.Type])],b)}(u);b.RootRouter=v;var w=function(a){function b(b,c){a.call(this,b.registry,b,c),this.parent=b}return g(b,a),b.prototype.navigateByUrl=function(a,b){return void 0===b&&(b=!1),this.parent.navigateByUrl(a,b)},b.prototype.navigateByInstruction=function(a,b){return void 0===b&&(b=!1),this.parent.navigateByInstruction(a,b)},b}(u);return e.define=f,c.exports}),System.register("angular2/router",["angular2/src/router/router","angular2/src/router/router_outlet","angular2/src/router/router_link","angular2/src/router/instruction","angular2/src/router/platform_location","angular2/src/router/route_registry","angular2/src/router/location_strategy","angular2/src/router/hash_location_strategy","angular2/src/router/path_location_strategy","angular2/src/router/location","angular2/src/router/route_config_decorator","angular2/src/router/route_definition","angular2/src/router/lifecycle_annotations","angular2/src/router/instruction","angular2/core","angular2/src/router/router_providers_common","angular2/src/router/router_providers","angular2/src/router/router_outlet","angular2/src/router/router_link","angular2/src/facade/lang"],!0,function(a,b,c){function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}var e=System.global,f=e.define;e.define=void 0;var g=a("angular2/src/router/router");b.Router=g.Router;var h=a("angular2/src/router/router_outlet");b.RouterOutlet=h.RouterOutlet;var i=a("angular2/src/router/router_link");b.RouterLink=i.RouterLink;var j=a("angular2/src/router/instruction");b.RouteParams=j.RouteParams,b.RouteData=j.RouteData;var k=a("angular2/src/router/platform_location");b.PlatformLocation=k.PlatformLocation;var l=a("angular2/src/router/route_registry");b.RouteRegistry=l.RouteRegistry,b.ROUTER_PRIMARY_COMPONENT=l.ROUTER_PRIMARY_COMPONENT;var m=a("angular2/src/router/location_strategy");b.LocationStrategy=m.LocationStrategy,b.APP_BASE_HREF=m.APP_BASE_HREF;var n=a("angular2/src/router/hash_location_strategy");b.HashLocationStrategy=n.HashLocationStrategy;var o=a("angular2/src/router/path_location_strategy");b.PathLocationStrategy=o.PathLocationStrategy;var p=a("angular2/src/router/location");b.Location=p.Location,d(a("angular2/src/router/route_config_decorator")),d(a("angular2/src/router/route_definition"));var q=a("angular2/src/router/lifecycle_annotations");b.CanActivate=q.CanActivate;var r=a("angular2/src/router/instruction");b.Instruction=r.Instruction,b.ComponentInstruction=r.ComponentInstruction;var s=a("angular2/core");b.OpaqueToken=s.OpaqueToken;var t=a("angular2/src/router/router_providers_common");b.ROUTER_PROVIDERS_COMMON=t.ROUTER_PROVIDERS_COMMON;var u=a("angular2/src/router/router_providers");b.ROUTER_PROVIDERS=u.ROUTER_PROVIDERS,b.ROUTER_BINDINGS=u.ROUTER_BINDINGS;var v=a("angular2/src/router/router_outlet"),w=a("angular2/src/router/router_link"),x=a("angular2/src/facade/lang");return b.ROUTER_DIRECTIVES=x.CONST_EXPR([v.RouterOutlet,w.RouterLink]),e.define=f,c.exports});