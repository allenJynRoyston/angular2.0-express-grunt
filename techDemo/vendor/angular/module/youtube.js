var youtube=angular.module("youtube-embed",[]);youtube.factory("youtubeEmbed",["$document","$q","$rootScope",function(e,t){function r(){n.resolve(window.yt)}var n=t.defer(),o=e[0].createElement("script");o.type="text/javascript",o.async=!0,o.src="https://www.youtube.com/player_api",o.onreadystatechange=function(){"complete"==this.readyState&&r()},o.onload=r();var a=e[0].getElementsByTagName("body")[0];return a.appendChild(o),{yt:function(){return n.promise}}}]),youtube.directive("youtube",["youtubeEmbed","$window",function(e,t){return{restrict:"E",template:'<div id="player"></div>',link:function(r,n,o){e.yt().then(function(){t.onYouTubePlayerAPIReady=function(){r.player=new YT.Player("player",{height:o.height,width:o.width,videoId:o.id}),r.$watch(function(){return o.id},function(e){var t=e;console.log(t),r.player=r.createPlayer(o)}),r.createPlayer=function(e){return r.player&&r.player.destroy(),new YT.Player("player",{height:e.height,width:e.width,videoId:e.id})}}})}}}]);